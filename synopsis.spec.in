# @configure_input@

Name:           Synopsis
Prefix:		/usr
Version:        0.4
Release:        1
Group:          Development/Tools
Copyright:      GPL
URL:            http://Synopsis.sourceforge.net/
Summary:        Source code documentation tool
Packager:       Stefan Seefeld (seefeld@sympatico.ca)

Source:         %{name}-%{version}.tar.gz
BuildRoot:      /var/tmp/%{name}-buildroot

%description

synopsis is a modular source code documentation tool with
support for a variety of programming languages, output formats,
and comment styles.

%prep
rm -rf ${RPM_BUILD_ROOT}

%setup -q 

%build
autoconf
./configure --prefix=%{prefix} --with-python-version=@python_version@ --with-python-prefix=@python_prefix@
make
export PYTHONPATH=`pwd`
make docs
%install
rm -rf $RPM_BUILD_ROOT
make install prefix=$RPM_BUILD_ROOT/%{prefix}

%clean
rm -rf $RPM_BUILD_ROOT

%files
%doc README
%doc docs/RefManual/Manual.pdf docs/RefManual/html
%{prefix}/bin/synopsis
%{prefix}/lib/python@python_version@/site-packages/Synopsis/*.py*
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Parser/*.py*
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Parser/C++/*.py*
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Parser/C++/*.so
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Linker/*.py*
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Formatter/*.py*
%{prefix}/lib/python@python_version@/site-packages/Synopsis/Formatter/HTML/*.py*
